import streamlit as st
import pandas as pd

# ุฏุชุงุณุช ุณุงุฏู
data = {
    "topic": ["ุดุฑูุน ูพุฑูฺู", "ูุญุตูู ุฌุฏุฏ", "ูพุดุชโุตุญูู", "ูููโููู ุงูฺฏุฒุด"],
    "tone": ["ุงูฺฏุฒุด", "ุชุจูุบุงุช", "ุฏูุณุชุงูู", "ุดุงุนุฑุงูู"],
    "caption": [
        "ูุฑ ุดุฑูุน ฺฉ ูุฑุตุช ุชุงุฒูโุณุช.",
        "ูุญุตูู ุฌุฏุฏููู ุฑุณุฏ! ููุชุธุฑ ูุธุฑุชูู ูุณุชู.",
        "ูพุดุชโุตุญููโ ุชูุงุดโูุง ูุง ููุดู ูพุฑ ุงุฒ ุนุดู ู ุฎูุฏูโุณุช.",
        "ุฏุฑ ุฏู ุชุงุฑฺฉุ ููุฑ ุฑูุงูุง ูโุฏุฑุฎุดู."
    ]
}
df = pd.DataFrame(data)

# ูุฑู ูุฑูุฏ
st.title("๐จ ฺฉูพุดูโุณุงุฒ ุงูุณุชุงฺฏุฑุงู")
topic = st.selectbox("ููุถูุน ูพุณุช:", df['topic'].unique())
tone = st.selectbox("ูุญู ฺฉูพุดู:", df['tone'].unique())

# ุชุงุจุนโูุง
def get_caption(topic, tone):
    result = df[(df['topic'] == topic) & (df['tone'] == tone)]
    if not result.empty:
        return result.iloc[0]['caption']
    else:
        return "ฺฉูพุดู ููุงุณุจ ูพุฏุง ูุดุฏ."

def suggest_hashtags(topic):
    hashtags_dict = {
        "ุดุฑูุน ูพุฑูฺู": ["#ุดุฑูุน", "#ุงูฺฏุฒู", "#ูพุฑูฺู", "#ุชูุณุนู", "#ูุฏู"],
        "ูุญุตูู ุฌุฏุฏ": ["#ูุญุตูู", "#ุฌุฏุฏ", "#ูุนุฑู", "#ุจุฑูุฏ", "#ุฎุฑุฏ"],
        "ูพุดุชโุตุญูู": ["#ูพุดุช_ุตุญูู", "#ุชู", "#ฺฉุงุฑ", "#ุฎูุฏู", "#ุชูุงุด"],
        "ูููโููู ุงูฺฏุฒุด": ["#ุงูฺฏุฒุด", "#ููููุช", "#ุงููุงู", "#ุฑูุง", "#ูพุดุฑูุช"]
    }
    return " ".join(hashtags_dict.get(topic, ["#ุงุฏู", "#ฺฉูพุดู", "#ุงูุณุชุงฺฏุฑุงู"]))

# ุชููุฏ ุฎุฑูุฌ
if st.button("ุชููุฏ ฺฉูพุดู"):
    caption = get_caption(topic, tone)
    hashtags = suggest_hashtags(topic)
    final = caption + "\n" + hashtags
    st.text_area("ฺฉูพุดู ููุง:", final, height=100)

    # ุฏฺฉูู ฺฉูพ ุฏุฑ ฺฉููพโุจูุฑุฏ
    st.code(final, language='markdown')

    # ุฐุฎุฑู ุจู ูุงู
    with open("caption.txt", "w", encoding="utf-8") as f:
        f.write(final)
    st.download_button("๐ฅ ุฏุงูููุฏ ูุงู TXT", data=final, file_name="caption.txt")

    # ุจุฑุง PDF ุง Word ูุงุฒ ุจู ฺฉุชุงุจุฎุงููโูุง ุงุถุงู ูุณุช (ุฏุฑ ุงุฏุงูู ุชูุถุญ ูโุฏู)
