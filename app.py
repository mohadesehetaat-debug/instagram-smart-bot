import streamlit as st
import pandas as pd
import random

st.set_page_config(page_title="ฺฉูพุดูโุณุงุฒ ููุดููุฏ ุงูุณุชุงฺฏุฑุงู", page_icon="๐จ")
st.title("๐จ ฺฉูพุดูโุณุงุฒ ููุดููุฏ ุงูุณุชุงฺฏุฑุงู")

# ุฏุชุงุณุช ฺฉูพุดูโูุง ุทููุงู
data = {
    "topic": ["ุดุฑูุน ูพุฑูฺู", "ุดุฑูุน ูพุฑูฺู", "ุดุฑูุน ูพุฑูฺู", "ูุญุตูู ุฌุฏุฏ", "ูุญุตูู ุฌุฏุฏ", "ูุญุตูู ุฌุฏุฏ"],
    "tone": ["ุงูฺฏุฒุด", "ุงูฺฏุฒุด", "ุงูฺฏุฒุด", "ุชุจูุบุงุช", "ุชุจูุบุงุช", "ุชุจูุบุงุช"],
    "caption": [
        "ุดุฑูุน ูุฑ ูพุฑูฺู ุนู ุดุฑูุน ู ูุณุฑ ุชุงุฒู. ูุฑุงุฑู ุจุง ูู ุจุณุงุฒูุ ุงุฏ ุจฺฏุฑูุ ู ุฑุดุฏ ฺฉูู. ุงู ููุท ู ูพุณุช ูุณุชุ ู ุชุนูุฏู ุจุฑุง ุณุงุฎุชู ุขูุฏูโุง ฺฉู ุจุงูุฑุด ุฏุงุฑู. ูุฑ ูุฏู ฺฉู ุจุฑูโุฏุงุฑูุ ูุง ุฑู ุจู ูุฏู ูุฒุฏฺฉโุชุฑ ูโฺฉูู. ุงูุฌุง ููุทูโ ุดุฑูุนูุ ูู ูพุงุงู.",
        "ููุช ุชุตูู ูโฺฏุฑ ุดุฑูุน ฺฉูุ ุนู ุจู ุฎูุฏุช ุงูุงู ุฏุงุฑ. ุงู ูพุฑูฺู ูุฑุงุฑู ูุดูู ุจุฏู ฺฉู ุจุง ุชูุงุด ู ุฎูุงูุชุ ูุฑ ฺุฒ ููฺฉูู. ูุง ุจุง ูู ูโุณุงุฒูุ ุจุง ูู ุงุฏ ูโฺฏุฑูุ ู ุจุง ูู ูููู ูโุดู. ุงู ููุท ู ูพุฑูฺู ูุณุชุ ู ูุณุฑ ุงููุงูโุจุฎุดู.",
        "ุดุฑูุน ูพุฑูฺู ุนู ุฑูุดูโฺฉุฑุฏู ฺุฑุงุบ ุชู ุชุงุฑฺฉ. ุจุง ูุฑ ูุฏูุ ูุณุฑ ูุงุถุญโุชุฑ ูโุดู. ุงูุฌุง ุฌุงู ฺฉู ุฑูุงูุง ุจู ูุงูุนุช ูุฒุฏฺฉ ูโุดู. ุจุง ุงูุฑฺุ ุชุนูุฏุ ู ุฎูุงูุชุ ูุฑุงุฑู ฺุฒ ุจุณุงุฒู ฺฉู ุชุฃุซุฑ ุจุฐุงุฑู.",
        "ูุญุตูู ุฌุฏุฏููู ุจุง ุนุดู ุณุงุฎุชู ุดุฏู. ูุฑ ุฌุฒุฆุด ุจุง ุฏูุช ุทุฑุงุญ ุดุฏู ุชุง ุชุฌุฑุจูโุง ุฎุงุต ุจุฑุงุชูู ุจุณุงุฒู. ุขูุงุฏูโุงุฏ ุจุฑุง ู ฺุฒ ูุชูุงูุชุ ุงู ูุญุตูู ููุท ู ุงุจุฒุงุฑ ูุณุชุ ู ุญุณ ุฌุฏุฏู ฺฉู ูุฑุงุฑู ุฑูุฒุชูู ุฑู ุจูุชุฑ ฺฉูู.",
        "ูุง ููุท ู ูุญุตูู ูุณุงุฎุชูุ ู ุญุณ ุฌุฏุฏ ุฎูู ฺฉุฑุฏู. ฺุฒ ฺฉู ูุฑุงุฑู ุชู ุฑูุฒูุฑฺฏโุชูู ุจุฏุฑุฎุดู ู ุญุงูุชูู ุฑู ุจูุชุฑ ฺฉูู. ุทุฑุงุญ ุฎุงุตุ ฺฉุงุฑุจุฑุฏ ุจูุฏูุ ู ุงูุฑฺ ูุซุจุชุด ุฑู ุงุฒ ุฏุณุช ูุฏุฏ. ุงู ูุญุตูู ุจุฑุง ุดูุงุณุช.",
        "ูุญุตูู ุฌุฏุฏ ุนู ู ูุฑุตุช ุชุงุฒู ุจุฑุง ุงุฑุชุจุงุท ุจุง ุดูุง. ุทุฑุงุญ ุฎุงุตุ ฺฉุงุฑุจุฑุฏ ุจูุฏูุ ู ุงูุฑฺ ูุซุจุชุด ุฑู ุงุฒ ุฏุณุช ูุฏุฏ. ูุฑ ุฌุฒุฆุด ุจุง ูฺฉุฑ ุณุงุฎุชู ุดุฏู ุชุง ุชุฌุฑุจูโุง ูุชูุงูุช ุจุณุงุฒู. ุงูุชุญุงูุด ฺฉูุ ุนุงุดูุด ูโุด."
    ]
}
df = pd.DataFrame(data)

# ุงูุชุฎุงุจ ููุถูุน ู ูุญู
topic = st.selectbox("๐ ููุถูุน ูพุณุช:", df['topic'].unique())
tone = st.selectbox("๐ญ ูุญู ฺฉูพุดู:", df['tone'].unique())

# ุงูุชุฎุงุจ ููุทูู
region = st.selectbox("๐ ููุทูู ููุฑุฏ ูุธุฑ ุจุฑุง ูพุดููุงุฏ ุชุฑูุฏ:", ["ุงุฑุงู", "ุชุฑฺฉู", "ุงูุงุฑุงุช", "ุขููุงู", "ุขูุฑฺฉุง"])

# ุชุงุจุน ูพุดููุงุฏ ฺฉูพุดูโูุง ุทููุงู
def get_captions(topic, tone):
    results = df[(df['topic'] == topic) & (df['tone'] == tone)]
    return results['caption'].tolist() if not results.empty else ["ฺฉูพุดู ููุงุณุจ ูพุฏุง ูุดุฏ."]

# ุชุงุจุน ูพุดููุงุฏ ูุดุชฺฏ
def suggest_hashtags(topic):
    hashtags_dict = {
        "ุดุฑูุน ูพุฑูฺู": ["#ุดุฑูุน", "#ุงูฺฏุฒู", "#ูพุฑูฺู", "#ุชูุณุนู", "#ูุฏู"],
        "ูุญุตูู ุฌุฏุฏ": ["#ูุญุตูู", "#ุฌุฏุฏ", "#ูุนุฑู", "#ุจุฑูุฏ", "#ุฎุฑุฏ"]
    }
    return " ".join(hashtags_dict.get(topic, ["#ุงุฏู", "#ฺฉูพุดู", "#ุงูุณุชุงฺฏุฑุงู"]))

# ูพุดููุงุฏ ุขููฺฏ ุชุฑูุฏ + ููฺฉ ูุงูุน
def trending_music(region):
    music_dict = {
        "ุงุฑุงู": [("ุฒุงฺฉุฑุจุฑฺฏ - ุตุงุฆุจ", "https://www.google.com/search?q=ุฏุงูููุฏ+ุขููฺฏ+ุฒุงฺฉุฑุจุฑฺฏ+ุตุงุฆุจ")],
        "ุชุฑฺฉู": [("Simge - Aลkฤฑn Olayฤฑm", "https://bibis.ir/simge-askin-olayim/")],
        "ุขูุฑฺฉุง": [("Doja Cat - Paint The Town Red", "https://bibis.ir/doja-cat-paint-the-town-red/")],
        "ุงูุงุฑุงุช": [("Balti - Ya Lili", "https://musicdel.ir/single-tracks/75313/")],
        "ุขููุงู": [("Apache 207 - Roller", "https://www.youtube.com/watch?v=Fo3DAhiNKQo")]
    }
    return music_dict.get(region, [("ุขููฺฏ ุชุฑูุฏ ุงูุช ูุดุฏ", "#")])

# ุฏฺฉูู ุชููุฏ ฺฉูพุดู
if st.button("โจ ุชููุฏ ฺฉูพุดู"):
    captions = get_captions(topic, tone)
    hashtags = suggest_hashtags(topic)
    music, link = random.choice(trending_music(region))

    st.markdown("### ๐ ฺฉูพุดูโูุง ูพุดููุงุฏ:")
    for i, cap in enumerate(captions):
        final = f"{cap}\n๐ถ ุขููฺฏ ูพุดููุงุฏ: {music}\n{hashtags}"
        st.text_area(f"ฺฏุฒูู {i+1}:", final, height=180)

        st.markdown(f"""
        <a href="{link}" target="_blank">
            <button style="background-color:#2ecc71;color:white;padding:8px;border:none;border-radius:5px;cursor:pointer;">
                ๐ต ุฏุงูููุฏ ุขููฺฏ ูพุดููุงุฏ
            </button>
        </a>
        """, unsafe_allow_html=True)

import streamlit as st
import random

st.set_page_config(page_title="ุชุญูู ููุดููุฏ ูพุฌ ุงูุณุชุงฺฏุฑุงู", page_icon="๐")
st.title("๐ ุชุญูู ููุดููุฏ ูพุฌ ุงูุณุชุงฺฏุฑุงู")

# ูุฑูุฏ ุงุณู ูพุฌ
col1, col2 = st.columns([1, 5])
with col1:
    st.markdown("### @")
with col2:
    page_name = st.text_input("ูุงู ูพุฌ ุงูุณุชุงฺฏุฑุงู ุฑุง ูุงุฑุฏ ฺฉูุฏ:")

# ุฏฺฉูู ุณุจุฒ ุงูุชุฑ
if page_name:
    if st.button("โ ุงูุชุฑ"):
        full_name = f"@{page_name}"
        st.success(f"ุฏุฑ ุญุงู ุจุฑุฑุณ ูพุฌ {full_name} ...")

        # ุชุญูู ูุฑุถ ุจุฑ ุงุณุงุณ ุณุฑฺ ุนููู
        def auto_analysis(name):
            # ุฏุงุฏูโูุง ูุฑุถ ุจุฑุง ููุงุด
            followers = random.randint(500, 5000)
            posts = random.randint(20, 150)
            bio = "ุทุฑุงุญ ุฎูุงู | ุขููุฒุด ุฑุงฺฏุงู | ููฺฉ ุฏูุฑู ุฏุฑ ุจู"
            link = "https://mohadeseh.design"

            # ุงุฑุงุฏูุง
            issues = []
            if followers < 1000:
                issues.append("๐ ุชุนุฏุงุฏ ูุงูููุฑ ูพุงูโุชุฑ ุงุฒ ุญุฏ ุงุณุชุงูุฏุงุฑุฏ ุจุฑุง ุฑุดุฏ ุงุฑฺฏุงูฺฉ")
            if posts < 30:
                issues.append("๐ฆ ุชุนุฏุงุฏ ูพุณุช ฺฉูุ ูุงุฒ ุจู ุชููุฏ ูุญุชูุง ููุธูโุชุฑ")
            if "ููฺฉ" not in bio.lower():
                issues.append("๐ ุจู ุจุฏูู ููฺฉ ูุณุชูู ุจู ูุญุตูู ุง ุฏูุฑู")
            if not link.startswith("https://"):
                issues.append("โ๏ธ ููฺฉ ุจู ูุงูุต ุง ุบุฑูุนุงู")

            # ููุน ูุญุชูุง ูุฑุถ
            content_type = random.choice(["ุขููุฒุด", "ุดุฎุต", "ุจุฑูุฏูฺฏ", "ููุฑ"])
            engagement = random.uniform(2.5, 6.5)

            # ุฑุงูฺฉุงุฑูุง
            tips = []
            tips.append(f"๐ ููุน ูุญุชูุง: {content_type}")
            if engagement < 4:
                tips.append("๐ ุชุนุงูู ูพุงูุ ุงุฒ CTA ูุงุถุญ ูุซู 'ูุธุฑ ุจุฏู' ุง 'ุณู ฺฉู' ุงุณุชูุงุฏู ฺฉู")
            tips.append("๐ต ุงุฒ ุขููฺฏโูุง ูุงุฑุงู ุฏุฑ ุฑูุฒ ุงุณุชูุงุฏู ฺฉู")
            tips.append("๐ ุฒูุงู ูพุณุชโฺฏุฐุงุฑ ุฑู ุจุง ุฑูุชุงุฑ ูุฎุงุทุจ ููุงููฺฏ ฺฉู")
            tips.append("๐ฏ ุงุฒ ูุดุชฺฏโูุง ุชุฑูุฏ ู ูุญู ุงุณุชูุงุฏู ฺฉู")
            tips.append("๐ง ุงุฒ ูพุดุชโุตุญููโ ูพุฑูฺูโูุงุช ูุญุชูุง ุจุณุงุฒ ุชุง ุงุนุชูุงุฏ ุงุฌุงุฏ ุจุดู")
            tips.append("๐จ ุงุฒ ุทุฑุงุญโูุง ุดุฎุต ู ุจุฑูุฏุช ุฏุฑ ูุงูุจ ุงุณุชูุฑ ู ูุงูุงุช ุงุณุชูุงุฏู ฺฉู")

            return followers, posts, bio, link, issues, tips

        followers, posts, bio, link, issues, tips = auto_analysis(full_name)

        st.markdown("### ๐ ุงุทูุงุนุงุช ุนููู ูพุฌ:")
        st.write("๐ฅ ุชุนุฏุงุฏ ูุงูููุฑ:", followers)
        st.write("๐ฆ ุชุนุฏุงุฏ ูพุณุช:", posts)
        st.write("๐ ุจู:", bio)
        st.write("๐ ููฺฉ ุจู:", link)

        st.markdown("### โ๏ธ ุงุฑุงุฏูุง ุงุญุชูุงู:")
        for issue in issues:
            st.markdown(f"- {issue}")

        st.markdown("### โ ุฑุงูฺฉุงุฑูุง ูพุดููุงุฏ ุจุฑุง ุฑุดุฏ ูพุฌ:")
        for tip in tips:
            st.markdown(f"- {tip}")
